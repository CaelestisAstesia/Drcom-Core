# 贡献指南

感谢您有兴趣为 `drcom-core` 做出贡献！

无论您是想修复一个 Bug，还是想适配您学校的特殊协议版本，我们都非常欢迎。

## 开发环境搭建

本项目要求 **Python 3.13+**。请确保您的环境满足要求。

安装方式请参考：[安装指南](../install.md)

在提交代码前，请务必自己撰写相应的测试，并确保所有测试通过。
```bash
pytest
```

## 代码规范

为了保持代码库的整洁和现代化，我们制定了以下规范：

1.  **类型提示 (Type Hinting)**
    * **必须**: 所有函数必须包含参数和返回值的类型注解。
    * **推荐**: 使用 Python 3.10+ 的新语法（如 `str | None` 代替 `Optional[str]`，`list[int]` 代替 `List[int]`）。

2.  **Docstrings**
    * 核心类和公共方法必须包含文档字符串。
    * 说明函数的作用、参数含义和返回值。

3.  **格式化**
    * 推荐使用 `Black` 或 `Ruff` 进行代码格式化。

## 提交流程

1.  在 GitHub 上创建一个 Issue，描述您想解决的问题或增加的功能。
2.  在本地创建一个新的分支：`git checkout -b feature/xxx`。
3.  编写代码并运行测试。
4.  提交代码并 Push 到您的 Fork 仓库。
5.  在 GitHub 上发起 Pull Request (PR)。

## 适配新学校

如果您解决了某个特定学校的认证问题（例如使用了特殊的 `ipdog` 值或 `os_info`），请：

1.  不要直接修改源码中的默认值。
2.  在 Issue 中分享您的 `config.toml` 配置（隐去敏感信息）。
3.  如果涉及协议逻辑的变更（例如某些学校不需要 KeepAlive2），请尝试通过增加配置项的方式来兼容，而不是硬编码。
